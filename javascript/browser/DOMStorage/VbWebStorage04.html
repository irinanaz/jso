<!DOCTYPE html>
<html>

<head>
	<title>Web Storage - OEF 1</title>
</head>

<body>
	<h1>array met JSON object in web storage</h1>
	<form>
		<label for="naam">Naam:</label>
		<input type="text" id="naam" placeholder="Tik hier uw naam">
		<br/>
		<label for="voornaam">Voornaam:</label>
		<input type="text" id="voornaam" placeholder="Tik hier uw voornaam">
		<br/>
		<input type="button" value="Voeg toe" onclick="voegPersoonInLocalStorage(this.form.naam.value, this.form.voornaam.value)">
	</form>
	<input type="button" value="Toon" onclick="toonPersoonUitLocalStorage()">
	<ul id="overzicht"></ul>
</body>
<script>
	
	function voegPersoonInLocalStorage(naam, voornaam) {
		
		if (parseInt(localStorage['tellerP']) >= 1) {

			localStorage['tellerP'] = parseInt(localStorage['tellerP']) + 1;

		} else {
			localStorage['tellerP'] = 1;
		}
		var pers = 'persoon' + localStorage['tellerP'];

		localStorage.setItem(pers, JSON.stringify({ "naam": naam, "voornaam": voornaam }));


	}
	function toonPersoonUitLocalStorage() {

		document.getElementById("overzicht").innerHTML="";

		if (parseInt(localStorage['tellerP'])>0) {
			for (var i = 1; i <= parseInt(localStorage['tellerP']); i++) {
				li = document.createElement("li");
				var value = JSON.parse(localStorage.getItem('persoon' + i)).voornaam+" "+JSON.parse(localStorage.getItem('persoon' + i)).naam;
				li.innerText = value;
				document.getElementById("overzicht").appendChild(li);
			}
		}
		else {
			alert("Er is nog geen persoon bewaard.");
		}
	}
</script>

</html>